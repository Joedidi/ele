import requests
import json
# # 代理ip
# # from get_ip import CheckIp
# # proxies=CheckIp().check_ip()
header = {
'Accept-Language': 'zh-CN,zh;q=0.9',
'amapuuid': '066fd82c-2fb9-4261-9054-54fc3d668dbe',
'Connection': 'keep-alive',
'Cookie': 'UM_distinctid=16bfb42367922e-0579fd68d74ef-e343166-144000-16bfb42367a229; cna=kmeYFbuhwXsCAd3b4tH+PPSp; _uab_collina=156328855288480083339547; passport_login=MzM4NTkwNTkzLGFtYXBfMTg4ODMzMTEzNDdDR2pvUFhxT0YsaGl3MmUzbG0zaG13cXF2emR3eGU2bHpsMmhxNnY3czMsMTU2ODg1OTk3NixZV1psTURKaE5EVXlPR1F5T1dWbVlqRTVOMlV4WTJNMU5ERTBNREl4TnprPQ%3D%3D; dev_help=SoaNZhMcbLtB3K9koeRggzA0NzgzOWEwMjgxM2YzY2FmZmJhZWZlYmI5N2YzMDc1ZDFiNGViMDBhN2MwZGUwNmIyMDliZTM5MTUyYWM5Y2Xeugj6Xewesr%2F2eKaXmjydKvE%2BdZsHGGW%2FOgb5pl2ASPvLFSmPfgBdj8caMa8BcRPT1fae%2FZFB%2BHIE2juXem1CmNvLlhceoNUCf%2BbZd0BuXbG77pZtOHMkW7TZ1ye%2BWC%2FDYsrFi9y3WNffBQyT7m0l; key=bfe31f4e0fb231d29e1d3ce951e2c780; CNZZDATA1255626299=1171513808-1563285689-https%253A%252F%252Fwww.baidu.com%252F%7C1569304227; guid=adce-f488-8c26-1f86; x-csrf-token=e3e6848eb30ee215d5186659794eb1d1; x5sec=7b22617365727665723b32223a226266323337633033303965313163313431376265303033323731396466303661434a482f70757746454b6e4b6c616e5a754c50642b77453d227d; l=cBQ_yMqqqrh0aoDjBOfZourza77tqIRbzsPzaNbMiICP9wXM5r3dWZCszSxHCnGVK6F2v3Wm0ejuB88pMyh4Z1u2AC1hE_1..; isg=BDQ0dRhb1e7170GGnWPqtuygBfKmDVj3dIAwr86VCL9COdaD5x2Bh8w_uTFEwZBP',
'Host': 'www.amap.com',
'Referer': 'https://www.amap.com/search?query=%E6%B8%9D%E4%B8%AD%E5%8C%BA',
'Sec-Fetch-Mode': 'cors',
'Sec-Fetch-Site': 'same-origin',
'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36',
'x-csrf-token': 'e3e6848eb30ee215d5186659794eb1d1',
'X-Requested-With': 'XMLHttpRequest'
}
url='https://www.amap.com/service/poiInfo?query_type=TQUERY&city=500000&keywords=南岸区'
data = requests.get(url, headers=header, verify=False).text
print(data)
data=json.loads(data).get('data').get('locres').get('poi_list')[0].get('coords')
print(data)
data_list=data.split(';')
# data_list=['106.801170', '29.589045', '106.800416', '29.587136', '106.793712', '29.580350', '106.788012', '29.576343', '106.781458', '29.566023', '106.780773', '29.563336', '106.778403', '29.561232', '106.771182', '29.549155', '106.771034', '29.546832', '106.764175', '29.530938', '106.761352', '29.527908', '106.754673', '29.516003', '106.754516', '29.513122', '106.753309', '29.510998', '106.748539', '29.505481', '106.741986', '29.495340', '106.738196', '29.486259', '106.733831', '29.484165', '106.711392', '29.483556', '106.707285', '29.481715', '106.705275', '29.482235', '106.706285', '29.484974', '106.705258', '29.487220', '106.693292', '29.488978', '106.691533', '29.487277', '106.693196', '29.484748', '106.692734', '29.482708', '106.689601', '29.479952', '106.683368', '29.476486', '106.682715', '29.475191', '106.684751', '29.470054', '106.688773', '29.468246', '106.686509', '29.466503', '106.679972', '29.463970', '106.676290', '29.460196', '106.671676', '29.457922', '106.665504', '29.458080', '106.665330', '29.458989', '106.668464', '29.462882', '106.666558', '29.463740', '106.661666', '29.463792', '106.658350', '29.467859', '106.655095', '29.465443', '106.655765', '29.462882', '106.654694', '29.462251', '106.651144', '29.464648', '106.646810', '29.466181', '106.642825', '29.469943', '106.641225', '29.470451', '106.633309', '29.468465', '106.627977', '29.465829', '106.626412', '29.467797', '106.624899', '29.468110', '106.621734', '29.467945', '106.620021', '29.466940', '106.616110', '29.468286', '106.613259', '29.469437', '106.613824', '29.471289', '106.612990', '29.472691', '106.606812', '29.474335', '106.602130', '29.470960', '106.599698', '29.471067', '106.597361', '29.465711', '106.595226', '29.463883', '106.586067', '29.473449', '106.584653', '29.473315', '106.584427', '29.472388', '106.579455', '29.469283', '106.577044', '29.475643', '106.577296', '29.477792', '106.573731', '29.480799', '106.571086', '29.481021', '106.568823', '29.485886', '106.559374', '29.488693', '106.557519', '29.488362', '106.556011', '29.486522', '106.552000', '29.487255', '106.551654', '29.492247', '106.549851', '29.495510', '106.539354', '29.501281', '106.534167', '29.505444', '106.532947', '29.507933', '106.532315', '29.511096', '106.532610', '29.530857', '106.535226', '29.536614', '106.538473', '29.539806', '106.542777', '29.541196', '106.556188', '29.541095', '106.577074', '29.545162', '106.583729', '29.547804', '106.588103', '29.553202', '106.590447', '29.559903', '106.590544', '29.565951', '106.589345', '29.570397', '106.584806', '29.572925', '106.581200', '29.578765', '106.580402', '29.590278', '106.581669', '29.596566', '106.585193', '29.603933', '106.589663', '29.609331', '106.603913', '29.616227', '106.613983', '29.617643', '106.623310', '29.614980', '106.627336', '29.610165', '106.628361', '29.601207', '106.633292', '29.592037', '106.640147', '29.587190', '106.646994', '29.587798', '106.653217', '29.591737', '106.656437', '29.591873', '106.657794', '29.590920', '106.661632', '29.586789', '106.672631', '29.566319', '106.674703', '29.564259', '106.679691', '29.562373', '106.683660', '29.562127', '106.692330', '29.564274', '106.695881', '29.566782', '106.700164', '29.571621', '106.707607', '29.576837', '106.730937', '29.583387', '106.737762', '29.586664', '106.740500', '29.589683', '106.747305', '29.605888', '106.748617', '29.607706', '106.752623', '29.610096', '106.766969', '29.610412', '106.790165', '29.605297', '106.792473', '29.604042', '106.794060', '29.601472', '106.794554', '29.596680', '106.796219', '29.592072', '106.801170', '29.589045']
print(data_list)
longitude=data_list[::2]
latitude=data_list[1::2]
max_longitude=float(max(longitude))
min_longitude=float(min(longitude))
max_latitude=float(max(latitude))
min_latitude=float(min(latitude))
# print(max_longitude)
# print(min_longitude)
# print(max_latitude)
# print(min_latitude)
while min_longitude<max_longitude:
    print(f"================================================={min_longitude}")
    min_latitude = float(min(latitude))
    while min_latitude<max_latitude:
        print(f"=========================={min_latitude}")
        for i in range(0, 120, 30):
            print(min_longitude,min_latitude,i)
            # url = f'https://h5.ele.me/restapi/shopping/v3/restaurants?latitude={latitude}&longitude={longitude}&offset={i}&limit=30&extras[]=activities&extras[]=tags&extra_filters=home&rank_id=18fbf58702554919b399dce3a4830bcc&terminal=h5'
            # print(url)
        min_latitude = float('%.6f' % (min_latitude + 0.05))
    min_longitude=float('%.6f' % (min_longitude+0.05))




